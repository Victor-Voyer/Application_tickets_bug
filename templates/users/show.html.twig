{% extends 'base.html.twig' %}

{% block title %}{{ user.nickname }}'s Profile{% endblock %}

{% block body %}
    <section class="form-section">
        <h2>Profile of {{ user.nickname }}</h2>

        {% for label, messages in app.flashes %}
            {% for message in messages %}
                <div class="alert alert-{{ label }}">
                    {{ message }}
                </div>
            {% endfor %}
        {% endfor %}
        
        <div class="avatar-container">
            {% if user.avatar %}
                <img class="avatar" src="{{ asset('uploads/users/' ~ user.avatar) }}" alt="{{ user.nickname }}'s avatar">
            {% else %}
                <div class="avatar-placeholder">No avatar</div>
            {% endif %}
        </div>
        
        <div class="profile-details">
            <p><strong>Nickname:</strong> {{ user.nickname }}</p>
            <p><strong>First Name:</strong> {{ user.firstName }}</p>
            <p><strong>Last Name:</strong> {{ user.lastName }}</p>
            <p><strong>Email:</strong> {{ user.email }}</p>
        </div>
        
        <div class="form-buttons">
            <a href="{{ path('app_tickets_index') }}" class="btn btn-secondary">Back to Home</a>

            {% if is_granted('ROLE_ADMIN') or is_granted('EDIT_PROFILE', user) %}
            
                <a href="{{ path('app_users_profile_edit', {'id': user.id}) }}" class="btn btn-info">Edit Profile</a>

                <a href="{{ path('app_users_change_password', {'id': user.id}) }}" class="btn btn-warning">Change Password</a>

                {# {{ include('users/_delete_form.html.twig') }} #}
            
            {% endif %}            
        </div>
    </section>
{% endblock %}

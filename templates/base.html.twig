<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>
			{% block title %}BTCrack
			{% endblock %}
		</title>

		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		{% use "components/nav.html.twig" %}
		<link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">


		{# <link rel="stylesheet" href="{{ asset('styles/ckeditor.css') }}"> #}

		{% block stylesheets %}
			{{ encore_entry_link_tags('app') }}
		{% endblock %}

		{% block javascripts %}
			{{ encore_entry_script_tags('app') }}
		{% endblock %}

		<script src="https://cdn.ckeditor.com/ckeditor5/41.4.2/classic/ckeditor.js"></script>
		<script>
		function initCkeditors() {
			document.querySelectorAll('textarea.js-ckeditor').forEach((el) => {
				if (el.classList.contains('ck-editor-initialized')) return;
				el.classList.add('ck-editor-initialized');

				ClassicEditor.create(el, {
					toolbar: [
						'bold', 'italic', 'link', '|',
						'bulletedList', 'numberedList', '|',
						'indent', 'outdent', '|',
						'code', 'blockQuote', 'undo', 'redo'
					],
					placeholder: el.getAttribute('placeholder') || 'Write your description...',
					language: 'en'
				}).then(editor => {
					// Stocker l'instance de l'éditeur sur le textarea
					el.ckeditorInstance = editor;
					
					// Synchroniser les données avant la soumission
					el.closest('form').addEventListener('submit', () => {
						el.value = editor.getData();
					});
				}).catch(console.error);
			});
		}

			document.addEventListener('DOMContentLoaded', initCkeditors);
			document.addEventListener('turbo:load', initCkeditors);
		</script>

	</head>
	<body>
		<header>
			<h1>
				<a href="{{ path('app_tickets_index') }}">BT<em>Crack</em>
				</a>
			</h1>
			{{block('nav')}}
		</header>
		<main>
			{% block body %}{% endblock %}
		</main>
	<footer>
		<span>© All Rights Reserved - S&V - 2025</span>
		<div>
			<span><a href="{{ path('app_terms') }}" style="color: inherit; text-decoration: none;">Terms of Use</a></span>
			<span> - Version 1.0.0</span>
		</div>
	</footer>
	</body>
</html>
